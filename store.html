<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AliNoVa Store â€” Ù†Ù‡Ø§Ø¦ÙŠ</title>
  <style>
    :root{--bg1:#0b0b0f;--bg2:#17171a;--card:rgba(0,0,0,0.72);--text:#fff;--muted:#bfbfbf;--accent:#00d1ff;--wa:#25D366}
    [data-theme="light"]{--bg1:#f6f8fb;--bg2:#e9eef7;--card:rgba(255,255,255,0.95);--text:#111;--muted:#555}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Tajawal,system-ui,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(135deg,var(--bg1),var(--bg2));color:var(--text);-webkit-font-smoothing:antialiased}

    /* Header */
    header{position:sticky;top:0;z-index:1200;display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:linear-gradient(180deg,rgba(0,0,0,0.45),rgba(0,0,0,0.15));backdrop-filter:blur(6px);animation:slideDown .6s ease}
    .controls{display:flex;gap:8px;align-items:center}
    .chip{background:#000;color:#fff;border:none;padding:8px 10px;border-radius:10px;cursor:pointer;font-weight:700}
    [data-theme="light"] .chip{background:#fff;color:#000;border:1px solid rgba(0,0,0,0.06)}

    /* Search + tabs */
    .search-wrap{display:flex;justify-content:center;padding:14px 16px}
    #search{width:min(860px,94%);padding:10px 14px;border-radius:12px;border:none;background:var(--card);color:var(--text);font-size:15px}
    .tabs{display:flex;gap:10px;justify-content:center;padding-bottom:8px}
    .tab{background:transparent;border:2px solid var(--accent);color:var(--text);padding:8px 14px;border-radius:12px;cursor:pointer;font-weight:800}
    .tab.active{background:var(--accent);color:#000}

    /* Grid */
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:18px;padding:18px}
    .card{background:var(--card);border-radius:14px;padding:14px;box-shadow:0 8px 24px rgba(0,0,0,0.35);transition:transform .22s,box-shadow .22s}
    .card:hover{transform:translateY(-6px)}
    .card h4{margin:0 0 8px;color:var(--accent)}
    .card p{margin:0 0 10px;color:var(--muted);font-size:14px}
    .price-row{display:flex;justify-content:space-between;align-items:center}
    .price{font-weight:900}
    .add-btn{background:#111;color:#fff;border:none;padding:8px 10px;border-radius:8px;cursor:pointer}

    /* Cart panel */
    .cart-panel{position:fixed;top:84px;right:0;width:min(420px,94vw);height:calc(100% - 96px);background:var(--card);color:var(--text);padding:14px;border-radius:12px 0 0 12px;box-shadow:-6px 0 20px rgba(0,0,0,0.35);transform:translateX(110%);transition:transform .45s ease;z-index:1300;display:flex;flex-direction:column}
    .cart-panel.show{transform:translateX(0)}
    .cart-header{display:flex;justify-content:space-between;align-items:center}
    .cart-items{overflow:auto;flex:1;margin-top:10px;padding-right:6px}
    .cart-item{display:flex;justify-content:space-between;align-items:center;padding:8px 6px;border-bottom:1px dashed rgba(255,255,255,0.06)}
    .cart-qty{display:flex;gap:6px;align-items:center}
    .qty-btn{background:#000;color:#fff;border:none;padding:6px 8px;border-radius:8px;cursor:pointer}
    .remove-btn{background:#b83f3f;color:#fff;border:none;padding:6px 8px;border-radius:8px;cursor:pointer}
    .cart-footer{padding-top:10px}
    .total{font-weight:900;margin-bottom:8px}
    .wa-btn{background:var(--wa);color:#fff;border:none;padding:10px;border-radius:10px;width:100%;font-weight:800;cursor:pointer}

    /* Badge */
    .cart-toggle{position:relative}
    .badge{position:absolute;top:-8px;inset-inline-end:-10px;background:#ff4d4d;color:#fff;padding:3px 7px;border-radius:999px;font-weight:800;display:none}

    /* Responsive tweaks */
    @media(max-width:560px){header{padding:10px} .card{padding:12px}}
    @keyframes fadeInUp{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:none}} @keyframes slideDown{from{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:none}}
  </style>
</head>
<body>
  <header>
    <div style="display:flex;align-items:center;gap:12px">
      <button id="langBtn" class="chip" title="language">ğŸ‡ªğŸ‡¬</button>
      <button id="themeBtn" class="chip" title="theme">ğŸŒ™</button>
    </div>
    <div>
      <button id="cartToggle" class="chip cart-toggle" title="cart">ğŸ›’ <span id="cartBadge" class="badge">0</span></button>
    </div>
  </header>

  <div class="search-wrap">
    <input id="search" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬..." />
  </div>

  <div class="tabs">
    <button class="tab active" data-tab="all">ğŸ›ï¸ Ø§Ù„ÙƒÙ„</button>
    <button class="tab" data-tab="offers">ğŸ·ï¸ Ø§Ù„Ø¹Ø±ÙˆØ¶</button>
  </div>

  <main>
    <section id="productsGrid" class="grid"></section>
  </main>

  <aside id="cartPanel" class="cart-panel" aria-hidden="true">
    <div class="cart-header">
      <h3 id="cartTitle">ğŸ›’ Ø§Ù„Ø³Ù„Ø©</h3>
      <div>
        <button id="closeCart" class="chip">âŒ</button>
      </div>
    </div>

    <div id="cartItems" class="cart-items"></div>

    <div class="cart-footer">
      <div class="total" id="cartTotalText">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="cartTotal">0</span> Ø¬Ù†ÙŠÙ‡</div>
      <button id="waBtn" class="wa-btn">Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</button>
    </div>
  </aside>

  <script>
    // config
    const whatsappNumber = '201105318814'; // ØºÙŠÙ‘Ø±Ù‡ Ù„Ø±Ù‚Ù…Ùƒ Ø¨Ø¯ÙˆÙ† +

    // products (complete list from user) â€” I've included full list you provided
    const products = [
      { name: "ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø³Ù„ÙƒÙŠØ© GAMMA K-15", desc: "ÙƒÙŠØ¨ÙˆØ±Ø¯ - USB", price: 175, offer:false, name_en:"Wired Keyboard GAMMA K-15", desc_en:"Keyboard - USB" },
      { name: "ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø³Ù„ÙƒÙŠØ© GAMMA K-16", desc: "ÙƒÙŠØ¨ÙˆØ±Ø¯ - USB", price: 185, offer:false, name_en:"Wired Keyboard GAMMA K-16", desc_en:"Keyboard - USB" },
      { name: "ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø³Ù„ÙƒÙŠØ© GAMMA K-17", desc: "ÙƒÙŠØ¨ÙˆØ±Ø¯ - USB", price: 190, offer:false, name_en:"Wired Keyboard GAMMA K-17", desc_en:"Keyboard - USB" },
      { name: "ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø³Ù„ÙƒÙŠØ© GAMMA K-18", desc: "ÙƒÙŠØ¨ÙˆØ±Ø¯ - USB", price: 195, offer:false, name_en:"Wired Keyboard GAMMA K-18", desc_en:"Keyboard - USB" },
      { name: "ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø³Ù„ÙƒÙŠØ© + Ù…Ø§ÙˆØ³ GAMMA K-511", desc: "ÙƒÙŠØ¨ÙˆØ±Ø¯ + Ù…Ø§ÙˆØ³ Ù„Ù„Ø£Ù„Ø¹Ø§Ø¨ Ù…Ø¶ÙŠØ¡ RGB", price: 290, offer:false, name_en:"Wired Keyboard + Mouse GAMMA K-511", desc_en:"Gaming keyboard + mouse with RGB" },
      { name: "ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø³Ù„ÙƒÙŠØ© GAMMA K-512", desc: "ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø£Ù„Ø¹Ø§Ø¨ Ù…Ø¹ Ø¥Ø¶Ø§Ø¡Ø©", price: 290, offer:false, name_en:"Wired Keyboard GAMMA K-512", desc_en:"Gaming keyboard with RGB" },
      { name: "ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø³Ù„ÙƒÙŠØ© GAMMA K-19", desc: "ÙƒÙŠØ¨ÙˆØ±Ø¯ - USB", price: 210, offer:false, name_en:"Wired Keyboard GAMMA K-19", desc_en:"Keyboard - USB" },
      { name: "ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø³Ù„ÙƒÙŠØ© GAMMA K-510", desc: "ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø£Ù„Ø¹Ø§Ø¨ Ù…Ø¹ RGB", price: 230, offer:false, name_en:"Wired Keyboard GAMMA K-510", desc_en:"Gaming keyboard with RGB" },
      { name: "ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø³Ù„ÙƒÙŠØ© GAMMA K-513", desc: "ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø£Ù„Ø¹Ø§Ø¨ Ù…Ø¹ RGB", price: 380, offer:false, name_en:"Wired Keyboard GAMMA K-513", desc_en:"Gaming keyboard with RGB" },
      { name: "ÙƒÙŠØ¨ÙˆØ±Ø¯ + Ù…Ø§ÙˆØ³ Ù„Ø§Ø³Ù„ÙƒÙŠØ© Platinum PL-400", desc: "ØªÙˆØµÙŠÙ„ Ù„Ø§Ø³Ù„ÙƒÙŠ Ø¹Ø¨Ø± Ù…Ø³ØªÙ‚Ø¨Ù„", price: 400, offer:false, name_en:"Wireless Keyboard + Mouse Platinum PL-400", desc_en:"Wireless via receiver" },
      { name: "ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø³Ù„ÙƒÙŠØ© Platinum PL-500", desc: "Ø³Ù„ÙƒÙŠØ© + Ø¥Ø¶Ø§Ø¡Ø© RGB", price: 450, offer:false, name_en:"Wired Keyboard Platinum PL-500", desc_en:"Wired with RGB" },
      { name: "ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø³Ù„ÙƒÙŠØ© GAMMA K-511", desc: "ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø£Ù„Ø¹Ø§Ø¨ + Ù…Ø§ÙˆØ³ RGB", price: 300, offer:false, name_en:"Wired Keyboard GAMMA K-511", desc_en:"Gaming combo with RGB" },
      { name: "ÙƒÙŠØ¨ÙˆØ±Ø¯ + Ù…Ø§ÙˆØ³ Platinum PL-600", desc: "ÙƒÙŠØ¨ÙˆØ±Ø¯ + Ù…Ø§ÙˆØ³ Ø£Ù„Ø¹Ø§Ø¨", price: 350, offer:false, name_en:"Keyboard + Mouse Platinum PL-600", desc_en:"Gaming combo with RGB" },
      { name: "ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø³Ù„ÙƒÙŠØ© Platinum PL-350", desc: "ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø³Ù„ÙƒÙŠØ©", price: 165, offer:false, name_en:"Wired Keyboard Platinum PL-350", desc_en:"Wired keyboard" },
      { name: "ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø³Ù„ÙƒÙŠØ© Platinum PL-300", desc: "ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø³Ù„ÙƒÙŠØ© slam", price: 155, offer:false, name_en:"Wired Keyboard Platinum PL-300", desc_en:"Wired keyboard" },
      { name: "Ù…Ø§ÙˆØ³ Ø³Ù„ÙƒÙŠØ© W410", desc: "Ù…Ø§ÙˆØ³ Ø³Ù„ÙƒÙŠØ© Ø¶Ù…Ø§Ù† Ø´Ù‡Ø±ÙŠÙ†", price: 68, offer:false, name_en:"Wired Mouse W410", desc_en:"2 months warranty" },
      { name: "Ù‡Ø§Ø±Ø¯ SSD 128", desc: "Ø¶Ù…Ø§Ù† Ø³Øª Ø´Ù‡ÙˆØ±", price: 850, offer:false, name_en:"SSD 128GB", desc_en:"6 months warranty" },
      { name: "Ù‡Ø§Ø±Ø¯ SSD 256", desc: "Ø¶Ù…Ø§Ù† Ø³Øª Ø´Ù‡ÙˆØ±", price: 1250, offer:false, name_en:"SSD 256GB", desc_en:"6 months warranty" },
      { name: "Ù‡Ø§Ø±Ø¯ HDD 350", desc: "Ø¶Ù…Ø§Ù† Ø«Ù„Ø§Ø« Ø´Ù‡ÙˆØ±", price: 300, offer:false, name_en:"HDD 350GB", desc_en:"3 months warranty" },
      { name: "Ù‡Ø§Ø±Ø¯ HDD 500", desc: "Ø¶Ù…Ø§Ù† Ø«Ù„Ø§Ø« Ø§Ø´Ù‡Ø±", price: 560, offer:false, name_en:"HDD 500GB", desc_en:"3 months warranty" },
      { name: "Ù…Ø§ÙˆØ³ Ù„Ø§Ø³Ù„ÙƒÙŠØ© gedel W927", desc: "Ø§ØªØµØ§Ù„ USB + Ø¨Ù„ÙˆØªÙˆØ«", price: 100, offer:false, name_en:"Wireless Mouse gedel W927", desc_en:"USB + Bluetooth" },
      { name: "Ù…Ø§ÙˆØ³ Ø³Ù„ÙƒÙŠØ© GAMMA GT-107", desc: "Ù…Ø§ÙˆØ³ Ø§Ù„Ø¹Ø§Ø¨", price: 100, offer:false, name_en:"Wired Mouse GAMMA GT-107", desc_en:"Gaming mouse" },
      { name: "Ù…Ø§ÙˆØ³ Ø³Ù„ÙƒÙŠØ© GAMMA GT-106", desc: "Ù…Ø§ÙˆØ³ Ø§Ù„Ø¹Ø§Ø¨", price: 100, offer:false, name_en:"Wired Mouse GAMMA GT-106", desc_en:"Gaming mouse" },
      { name: "Ù…Ø§ÙˆØ³ Ø§Ù„Ø§Ù„Ø¹Ø§Ø¨ Ù„Ø§Ø³Ù„ÙƒÙŠ gertech NASUS W200", desc: "Ù…Ø§ÙˆØ³ Ø§Ù„Ø¹Ø§Ø¨ Ø¨ÙˆØµÙ„Ø© USB", price: 325, offer:false, name_en:"Wireless Gaming Mouse gertech NASUS W200", desc_en:"USB dongle" },
      { name: "Ù…Ø§ÙˆØ³ Ø³ÙŠÙ„ÙƒÙŠØ©", desc: "OPTICAL MOUSE", price: 150, offer:false, name_en:"Wired Mouse", desc_en:"Optical mouse" },
      { name: "Ù…Ø§ÙˆØ³ Ù„Ø§Ø³Ù„ÙƒÙŠ Gigamax G-1300", desc: "USB + Bluetooth + RGB", price: 220, offer:false, name_en:"Wireless Mouse Gigamax G-1300", desc_en:"USB + Bluetooth + RGB" },
      { name: "ÙƒØ§Ø¨Ù„ Ø¨Ø§ÙˆØ± Ù„Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±", desc: "(16 Ø§Ù…Ø¨ÙŠØ±) Ù…ØªØ± Ùˆ Ù†Øµ", price: 40, offer:false, name_en:"PC Power Cable", desc_en:"16A, 1.5m" },
      { name: "ÙƒØ§Ø¨Ù„ USB Ø·Ø§Ø¨Ø¹Ø©", desc: "ÙƒØ§Ø¨Ù„ Ø·Ø§Ø¨Ø¹Ø© Ù…ØªØ± Ùˆ Ù†Øµ", price: 35, offer:false, name_en:"Printer USB Cable", desc_en:"1.5m" },
      { name: "ÙƒØ§Ø¨Ù„ HDMI 5m", desc: "HDMI 5 Ù…ØªØ±", price: 320, offer:false, name_en:"HDMI Cable 5m", desc_en:"5 meters" },
      { name: "ÙƒØ§Ø¨Ù„ HDMI 1.5m", desc: "ÙƒØ§Ø¨Ù„ HDMI Ù…ØªØ± ÙˆÙ†Øµ", price: 50, offer:false, name_en:"HDMI Cable 1.5m", desc_en:"1.5 meters" },
      { name: "Ù…Ø§ÙˆØ³ Ù„Ø§Ø³Ù„ÙƒÙŠ HP", desc: "USB + Bluetooth + RGB", price: 125, offer:false, name_en:"HP Wireless Mouse", desc_en:"USB + Bluetooth + RGB" },
      { name: "Ù…Ø§ÙˆØ³ Ù„Ø§Ø³Ù„ÙƒÙŠ yox 3100", desc: "USB + Ù…Ø±ÙŠØ­", price: 85, offer:false, name_en:"Wireless Mouse yox 3100", desc_en:"USB, ergonomic" },
      { name: "ÙƒØ§Ø¨Ù„ ÙÙŠØ¬Ø§ Ø§Ø³ØªØ±Ø§Ø¯", desc: "ÙƒØ§Ø¨Ù„ ÙÙŠØ¬Ø§ Ø§Ø³ØªØ±Ø§Ø¯ 1.5m", price: 100, offer:false, name_en:"Imported VGA Cable", desc_en:"1.5m" },
      { name: "Point Cable VGA Grey", desc: "Point Cable VGA 10M Grey", price: 195, offer:false, name_en:"Point VGA Cable Grey", desc_en:"10m" },
      { name: "DELL VGA Cable", desc: "DELL VGA Cable 1.2m - Black", price: 290, offer:false, name_en:"DELL VGA Cable", desc_en:"1.2m - Black" },
      { name: "Point Cable VGA WHITE", desc: "Point Cable VGA 20M WHITE", price: 380, offer:false, name_en:"Point VGA Cable White", desc_en:"20m" },
      { name: "Ù…Ø­ÙˆÙ„ HDMI Ø§Ù„Ù‰ VGA", desc: "Ù…Ø­ÙˆÙ„ HDMI Ø§Ù„Ù‰ VGA", price: 95, offer:false, name_en:"HDMI to VGA Adapter", desc_en:"PC & Laptop" },
      { name: "DisplayPort ÙƒØ§Ø¨Ù„", desc: "DisplayPort (DP) Ù„Ù„Ø£Ù„Ø¹Ø§Ø¨ ÙˆØ§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„Ø¹Ø§Ù„ÙŠØ©", price: 155, offer:false, name_en:"DisplayPort Cable", desc_en:"For gaming & high-res" },
      { name: "ÙÙ„Ø§Ø´Ù‡ 8 Ø¬ÙŠØ¬Ø§", desc: "ÙÙ„Ø§Ø´Ù‡ 8 Ø¬ÙŠØ¬Ø§ kingston", price: 170, offer:false, name_en:"Flash Drive 8GB", desc_en:"Kingston 8GB" },
      { name: "ÙÙ„Ø§Ø´Ù‡ 16 Ø¬ÙŠØ¬Ø§", desc: "ÙÙ„Ø§Ø´Ù‡ 16 Ø¬ÙŠØ¬Ø§ kingston", price: 185, offer:false, name_en:"Flash Drive 16GB", desc_en:"Kingston 16GB" },
      { name: "ÙÙ„Ø§Ø´Ù‡ 32 Ø¬ÙŠØ¬Ø§", desc: "ÙÙ„Ø§Ø´Ù‡ 32 Ø¬ÙŠØ¬Ø§ kingston", price: 200, offer:false, name_en:"Flash Drive 32GB", desc_en:"Kingston 32GB" },
      { name: "ÙÙ„Ø§Ø´Ù‡ 64 Ø¬ÙŠØ¬Ø§", desc: "ÙÙ„Ø§Ø´Ù‡ 64 Ø¬ÙŠØ¬Ø§ kingston", price: 250, offer:false, name_en:"Flash Drive 64GB", desc_en:"Kingston 64GB" },

      // offers
      { name: "Ù…Ø§ÙˆØ³ Ù„Ø§Ø³Ù„ÙƒÙŠ", desc: "Ù…ÙˆØ³ Ù„Ø§Ø³Ù„ÙƒÙŠ Ù…ÙˆØ¯ÙŠÙ„ jedel W927", price: 130, offer:true, name_en:"Wireless Mouse", desc_en:"jedel W927" },
      { name: "Ù…Ø§ÙˆØ³ Ø³Ù„Ùƒ Ø¬Ø§Ù…Ø§", desc: "Ù…Ø§ÙˆØ³ Ø¬Ø§Ù…Ø§ GT-106 Ù…Ø§Ø±ÙƒÙ‡ GAMMA", price: 425, offer:true, name_en:"Wired Mouse GAMMA", desc_en:"GT-106" },
      { name: "Ù…Ø§ÙˆØ³ Ø³Ù„Ùƒ", desc: "Ù…Ø§ÙˆØ³ Ø³ÙŠÙ„ÙƒÙŠ Ù…ÙˆØ¯ÙŠÙ„ Gamma GT-106", price: 95, offer:true, name_en:"Wired Mouse", desc_en:"Gamma GT-106" },
      { name: "ÙƒØ§Ù…ÙŠØ±Ø§ Ù…Ø±Ø§Ù‚Ø¨Ø©", desc: "Ø¹Ø¯Ø³Ø© Ù„ÙŠÙ„ÙŠØ© - 1080p", price: 700, offer:true, name_en:"CCTV Camera", desc_en:"Night vision - 1080p" }
    ];

    // state
    let lang = localStorage.getItem('lang') || 'ar';
    let theme = localStorage.getItem('theme') || 'dark';
    let cart = JSON.parse(localStorage.getItem('cart')||'[]');

    // elements
    const langBtn = document.getElementById('langBtn');
    const themeBtn = document.getElementById('themeBtn');
    const cartToggle = document.getElementById('cartToggle');
    const cartBadge = document.getElementById('cartBadge');
    const searchEl = document.getElementById('search');
    const productsGrid = document.getElementById('productsGrid');
    const cartPanel = document.getElementById('cartPanel');
    const cartItemsEl = document.getElementById('cartItems');
    const cartTotalEl = document.getElementById('cartTotal');
    const waBtn = document.getElementById('waBtn');
    const tabs = document.querySelectorAll('.tab');

    // translations
    const trans = {
      ar:{store:'Ø§Ù„Ù…ØªØ¬Ø±',offers:'Ø§Ù„Ø¹Ø±ÙˆØ¶',add:'Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©',cart:'ğŸ›’ Ø§Ù„Ø³Ù„Ø©',total:'Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ',search:'ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬...',wa:'Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨',empty:'Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©'},
      en:{store:'Store',offers:'Offers',add:'Add to cart',cart:'ğŸ›’ Cart',total:'Total',search:'ğŸ” Search products...',wa:'Send via WhatsApp',empty:'Cart is empty'}
    };

    // apply saved theme/lang
    document.documentElement.setAttribute('data-theme', theme==='dark'?'dark':'light');
    if(theme==='light') document.documentElement.setAttribute('data-theme','light');
    langBtn.textContent = lang==='ar'?'ğŸ‡ªğŸ‡¬':'ğŸ‡¬ğŸ‡§';
    themeBtn.textContent = theme==='dark'?'ğŸŒ™':'â˜€ï¸';
    searchEl.placeholder = trans[lang].search;

    // helpers
    function localSave(){ localStorage.setItem('lang',lang); localStorage.setItem('theme',theme); localStorage.setItem('cart',JSON.stringify(cart)); }

    function formatPrice(n){ return `${n} ${lang==='ar'?'Ø¬Ù†ÙŠÙ‡':'EGP'}` }

    // render products
    let currentTab = 'all';
    function renderProducts(){
      const q = searchEl.value.trim().toLowerCase();
      productsGrid.innerHTML = '';
      products.filter((p)=> (currentTab==='offers' ? p.offer : true) && ( (p.name + ' ' + (p.name_en||'') + ' ' + p.desc + ' ' + (p.desc_en||'')).toLowerCase().includes(q) ) )
        .forEach((p,i)=>{
          const idx = i;
          const card = document.createElement('div'); card.className='card';
          const name = lang==='en' && p.name_en ? p.name_en : p.name;
          const desc = lang==='en' && p.desc_en ? p.desc_en : p.desc;
          card.innerHTML = `<h4>${name}</h4><p>${desc}</p><div class="price-row"><div class="price">${formatPrice(p.price)}</div><button class="add-btn" data-i="${idx}">${trans[lang].add}</button></div>`;
          productsGrid.appendChild(card);
        });
      // bind add
      document.querySelectorAll('.add-btn').forEach(b=> b.onclick = ()=> addToCart(+b.dataset.i));
    }

    // cart operations
    function updateCartUI(){
      // badge
      const count = cart.reduce((a,c)=>a+c.qty,0);
      cartBadge.style.display = count>0? 'inline-block':'none';
      cartBadge.textContent = count;
      // items
      cartItemsEl.innerHTML = '';
      if(cart.length===0){ cartItemsEl.innerHTML = `<div style="padding:14px;color:var(--muted)">${trans[lang].empty}</div>` }
      let total = 0;
      cart.forEach((it,idx)=>{
        total += it.price * it.qty;
        const row = document.createElement('div'); row.className='cart-item';
        const name = lang==='en' && it.name_en? it.name_en: it.name;
        row.innerHTML = `<div style="flex:1"><strong>${name}</strong><div style="color:var(--muted);font-size:13px">${formatPrice(it.price)}</div></div>
          <div class="cart-qty">
            <button class="qty-btn" data-dec="${idx}">-</button>
            <div style="min-width:26px;text-align:center">${it.qty}</div>
            <button class="qty-btn" data-inc="${idx}">+</button>
            <button class="remove-btn" data-del="${idx}">ğŸ—‘ï¸</button>
          </div>`;
        cartItemsEl.appendChild(row);
      });
      cartTotalEl.textContent = total;
      // bind qty / remove
      document.querySelectorAll('[data-inc]').forEach(b=> b.onclick = ()=> changeQty(+b.dataset.inc, +1));
      document.querySelectorAll('[data-dec]').forEach(b=> b.onclick = ()=> changeQty(+b.dataset.dec, -1));
      document.querySelectorAll('[data-del]').forEach(b=> b.onclick = ()=> removeItem(+b.dataset.del));
      localSave();
    }

    function addToCart(i){
      const p = products[i];
      // match by name+price to avoid index mismatch when filtering
      const nameKey = (lang==='en' && p.name_en)? p.name_en : p.name;
      let found = cart.find(x=>x.name===nameKey && x.price===p.price);
      if(found) found.qty += 1; else cart.push({ name:p.name, name_en:p.name_en, price:p.price, qty:1 });
      updateCartUI();
      // small visual feedback
      const btn = document.querySelector(`[data-i="${i}"]`);
      if(btn){ btn.animate([{transform:'scale(1)'},{transform:'scale(1.06)'},{transform:'scale(1)'}],{duration:220}) }
    }

    function changeQty(i,delta){ if(!cart[i]) return; cart[i].qty += delta; if(cart[i].qty<=0) cart.splice(i,1); updateCartUI(); }
    function removeItem(i){ cart.splice(i,1); updateCartUI(); }

    // whatsapp
    waBtn.onclick = ()=>{
      if(cart.length===0) return alert(lang==='ar'? 'Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©' : 'Cart is empty');
      let msg = `${lang==='ar'?'Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† AliNoVa':'New order from AliNoVa'}:\n`;
      cart.forEach(it=>{
        const name = (lang==='en' && it.name_en)? it.name_en : it.name;
        msg += `- ${name} x${it.qty} = ${it.price*it.qty} ${lang==='ar'?'Ø¬Ù†ÙŠÙ‡':'EGP'}\n`;
      });
      const total = cart.reduce((a,c)=>a+c.price*c.qty,0);
      msg += `\n${lang==='ar'? 'Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ' : 'Total'}: ${total} ${lang==='ar'?'Ø¬Ù†ÙŠÙ‡':'EGP'}`;
      const url = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(msg)}`;
      window.open(url,'_blank');
    }

    // UI events
    cartToggle.onclick = ()=>{ cartPanel.classList.toggle('show'); cartPanel.setAttribute('aria-hidden', cartPanel.classList.contains('show')? 'false':'true'); }
    document.getElementById('closeCart').onclick = ()=> cartPanel.classList.remove('show');

    searchEl.addEventListener('input', ()=> renderProducts());
    tabs.forEach(btn=> btn.addEventListener('click', ()=>{ tabs.forEach(b=>b.classList.remove('active')); btn.classList.add('active'); currentTab = btn.dataset.tab; renderProducts(); }))

    langBtn.onclick = ()=>{ lang = lang==='ar'?'en':'ar'; localSave(); applyLang(); }
    themeBtn.onclick = ()=>{ theme = theme==='dark'?'light':'dark'; document.documentElement.setAttribute('data-theme', theme); localSave(); themeBtn.textContent = theme==='dark'? 'ğŸŒ™' : 'â˜€ï¸'; }

    function applyLang(){
      langBtn.textContent = lang==='ar'?'ğŸ‡ªğŸ‡¬':'ğŸ‡¬ğŸ‡§';
      themeBtn.textContent = theme==='dark'? 'ğŸŒ™' : 'â˜€ï¸';
      searchEl.placeholder = trans[lang].search;
      document.getElementById('cartTitle').textContent = trans[lang].cart;
      document.getElementById('cartTotalText').firstChild && (document.getElementById('cartTotalText').firstChild.textContent = trans[lang].total + ': ');
      waBtn.textContent = trans[lang].wa;
      renderProducts();
      updateCartUI();
    }

    // init
    document.documentElement.setAttribute('data-theme', theme);
    applyLang();
    renderProducts();
    updateCartUI();

  </script>
</body>
</html>
